<document title="IPC Functions">
    <synopsis>
        Functions that allow daemons to communicate.  These are mainly used to force
        daemons to reload cached data when one of them updates it.
    </synopsis>
    <todo>
      Investigate, is there a double-eval going on for the daemon that issues
      the command? -- possibly just store the value of time() instead of using
      sql NOW()  
    </todo>
    <function name="eval">
        <synopsis>
            Issues a command for all daemons of the current site to execute
        </synopsis>
        <note>
            The command is executed in the 'ipc' package.  Be sure to use
            fully-qualified names for functions and variables.
        </note>
        <prototype>
            ipc::eval(string command)
        </prototype>
        <example>
            ipc::eval('news::_load_labels()');
        </example>
        <example>
            ipc::eval('user::_load_groups()');
        </example>
        <todo>
            this should throw a perl error
        </todo>
    </function>
    <function name="do">
        <synopsis>
            Executes all waiting tasks in the ipc queue
        </synopsis>
        <note>
            This function is not exported by default, to use it you must call it by
            its fully qualified name.
        </note>
        <note>
            Modules should not need to call this function, Oyster performs this
            task automatically.
        </note>
        <prototype>
            ipc::do()
        </prototype>
    </function>
</document>
