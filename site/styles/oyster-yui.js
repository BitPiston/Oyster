var oyster={toggle_visibility:function(a){$(a).setStyle("display",($(a).getStyle("display")=="block"?"none":"block"))},toggle_checkbox:function(a){$(a).setProperty("checked",($(a).getProperty("checked")?"":"checked"))},ajax:{popup:function(a){$("oyster_ajax_popup_overlay").setStyle("height",window.getScrollHeight())+window.getHeight();$("oyster_ajax_popup_overlay").setStyle("display","block");$("oyster_ajax_popup").setStyle("display","block");$("oyster_ajax_popup_content").innerHTML=$("oyster_ajax_popup_loading").innerHTML;oyster.ajax.center_popup();oyster.ajax.submit_url(a,"oyster_ajax_popup_content")},close_popup:function(){$("oyster_ajax_popup").setStyle("display","none");$("oyster_ajax_popup_overlay").setStyle("display","none");oyster.ajax.send("","oyster_ajax_popup_content");oyster.ajax.center_popup()},submit_url:function(b,a){var c="handler=ajax&ajax_target="+a;if(b.indexOf("?")==-1){b+="?"+c}else{if(b.substr(-1)=="&"||b.substr(-1)=="?"){b+=c}else{b+="&"+c}}$("oyster_ajax_form").action=b;oyster.ajax.submit_form("oyster_ajax_form",a)},submit_form:function(a,d){var e=$(a);var b=e.action;var c=e.target;var f="handler=ajax&ajax_target="+d;if(e.action.indexOf("?")==-1){e.action+="?"+f}else{if(e.action.substr(-1)=="&"||e.action.substr(-1)=="?"){e.action+=f}else{e.action+="&"+f}}e.target="oyster_ajax_iframe";e.submit();e.target=c;e.action=b},send:function(b,a){$(a).innerHTML=b;if(a=="oyster_ajax_popup_content"){oyster.ajax.center_popup()}},center_popup:function(){var d=window.getWidth();var f=$("oyster_ajax_popup").getStyle("width").replace("px","");var b=d/2-f/2;$("oyster_ajax_popup").setStyle("left",b);var e=window.getHeight();var a=$("oyster_ajax_popup").getStyle("height").replace("px","");var c=e/2-a/2;$("oyster_ajax_popup").setStyle("top",c)}},editbuttons:{install:function(b){var a=b+"_translation_mode";$(a).addEvent("change",function(){oyster.editbuttons.populate(b)});oyster.editbuttons.populate(b)},populate:function(b){var a=b+"_translation_mode";if($(a).getValue()=="bbcode"){$("oyster_editbuttons_"+b+"_bbcode").setStyle("display","block");$("oysters_editbuttons_"+b+"_xhtml").setStyle("display","none")}if($(a).getValue()=="xhtml"){$("oyster_editbuttons_"+b+"_bbcode").setStyle("display","none");$("oyster_editbuttons_"+b+"_xhtml").setStyle("display","block")}},insert_tag:function(a,i,j,c){field=$(i);var e=$(i+"_translation_mode");var g;var b;if(e.getValue()=="bbcode"){g="["+j+"]";b="[/"+j+"]"}else{if(e.getValue()=="xhtml"){g="<"+j+">";b="</"+j+">"}}if(document.selection){field.focus();var d=document.selection.createRange();if(a.value.substring(0,1)=="/"){a.value=a.value.substring(1,a.value.length);d.text=b}else{a.value="/"+a.value;d.text=g}}else{if(field.selectionStart||field.selectionStart=="0"){var f=field.selectionStart;var h=field.selectionEnd;if(f==h||c==0){if(a.value.substring(0,1)=="/"){a.value=a.value.substring(1,a.value.length);field.value=field.value.substring(0,f)+b+field.value.substring(f,field.value.length)}else{a.value="/"+a.value;field.value=field.value.substring(0,f)+g+field.value.substring(f,field.value.length)}}else{field.value=field.value.substring(0,f)+g+field.value.substring(f,h)+b+field.value.substring(h,field.value.length)}field.focus()}else{if(a.value.substring(0,1)=="/"){a.value=a.value.substring(1,a.value.length);field.value+=b}else{a.value="/"+a.value;field.value+=g}}}},insert_file:function(b,c){var a=b+"_translation_mode";if($(a).getValue()=="bbcode"){$(b).value+="[include#"+c+"]"}else{if($(a).getValue()=="xhtml"){$(b).value+="<!--include#"+c+"-->"}}}}};